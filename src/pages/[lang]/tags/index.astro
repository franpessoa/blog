---
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import BaseLayout from "/src/layouts/BaseLayout.astro";

const allPosts: any[] = await getCollection("posts");
console.log(allPosts);

const uniqueTags = [
    ...new Set(allPosts.map((post: any) => post.data.tags).flat()),
];

export const getStaticPaths = (() => {
    return [{ params: { lang: "en" } }, { params: { lang: "pt-br" } }];
}) satisfies GetStaticPaths;

const { lang } = Astro.params;
console.log(lang);
---

<BaseLayout title="Tags" {lang}>
    <h1>Tags</h1>
    <ul>
        {
            uniqueTags.map((tag: string) => (
                <li>
                    <a href={"/" + lang + "/tags/" + tag}>{tag}</a>
                </li>
            ))
        }
    </ul>
</BaseLayout>
